{% set extension = config.theme.production ? '.min' : '' %}
<!DOCTYPE html>
<html lang="{{ (grav.language.getActive ?: grav.config.site.default_lang)|e }}">
<head>
    {% block head %}
        <meta charset="utf-8" />
        <title>{% if header.title %}{{ header.title|e }} | {% endif %}{{ site.title|e }}</title>

        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        {% include 'partials/metadata.html.twig' %}

        <link rel="canonical" href="{{ page.url(true, true)|e }}" />
    {% endblock head %}

    {% block stylesheets %}
        {% do assets.addCss('theme://dist/css/site' ~ extension ~ '.css', 98) %}
    {% endblock %}

    {% block assets deferred %}
        {{ assets.css()|raw }}
        {{ assets.js()|raw }}
        <script src="{{ url('theme://js/vendor/alpine.js') }}" defer></script>
        <script type="module" src="{{ url('theme://js/main' ~ extension ~ '.js') }}"></script>
    {% endblock %}

</head>
<body id="top">

{% block header %}
    <header class="header p-[2vh] pb-0 mt-[4vh] pl-8">
            <div>
                <a class="logo" href="{{ home_url|e }}">{{ config.site.title|e }}</a>
            </div>
            {% block header_navigation %}
                <nav class="home-nav">
                    {% import 'macros/macros.html.twig' as macros %}
                    <ul class="hidden lg:flex flex-col gap-[10vh] text-right mt-[-1em]">
                        {{ macros.nav_loop(pages) }}
                    </ul>
                </nav>
            {% endblock %}
    </header>
{% endblock %}

{% block main %}
    <main>
        {% if page.header.videos_mp4 or page.header.videos_webm %}
            <video id="bg-video" autoplay muted loop>
                {% for video in page.header.videos_webm %}
                    <source src="{{ video.path }}" type="video/webm">
                {% endfor %}
                {% for video in page.header.videos_mp4 %}
                    <source src="{{ video.path }}" type="video/mp4">
                {% endfor %}
                Vidéo non supportée par le navigateur.
            </video>
        {% endif %}

        <div class="lg:visible invisible absolute pl-16 bottom-[0rem] 2xl:text-7xl tracking-[0.07em] bottom-[5vh] welcome">
            <p>Bienvenue <br>sur mon portfolio</p>
        </div>
    </main>
{% endblock %}
{% block footer %}
    <footer class="lg:visible invisible fixed bottom-[0rem] flex justify-center w-full items-center min-h-[3rem]">
        <div class="flex gap-[1em]">
            {% for page in pages.children %}
                {% if page.header.footer == true %}
                    <a href="{{ page.url }}">{{ page.title }}</a>
                {% endif %}
            {% endfor %}
        </div>
    </footer>
{% endblock %}

{% block bottom %}
    {{ assets.js('bottom')|raw }}
{% endblock %}

</body>
</html>